<!DOCTYPE html>
<html>
  <body>
     <polymer-element name="x-questionnaire-widget">
        <template id="questionnaire" if="{{questionnaire != null}}">
          <template bind="{{questionnaire}}">
            <h1>{{questionnaireName}}</h1>
            <template repeat="{{ groups }}">
              <article>
                <h3>{{description}}</h3>
                <p>{{score}}</p>
                <table class="question-group">
                  <tr template repeat="{{ questions }}">
                    <td>{{question}}</td>
                    <td>
                      <select on-change="showMessage">
                        <option template repeat="{{ options }}">{{}}</option>
                      </select>
                    </td>
                  </tr>              
                </table>
              </article>
            </template>
          </template>
        </template>
        
        <script type="application/dart">
          import 'package:polymer/polymer.dart';
          import 'package:polymer_app/polymer_lib.dart';

          @CustomTag('x-questionnaire-widget')
          class XQuestionnaire extends PolymerElement with ObservableMixin {
            @observable Questionnaire questionnaire = new BurnsQuestionnaire();
            
            showDasQuestionnaire() {
               questionnaire = new DasQuestionnaire();
               Observable.dirtyCheck();
            }
            
            showBurnsQuestionnaire() {
              questionnaire = new BurnsQuestionnaire();
              Observable.dirtyCheck();
            }

            showMessage(event) {
              var target = event.target; 
              //var model = target.model;
              print("event ${event.toString()} value ${target.value}");
              Observable.dirtyCheck();
            }       
          }
        </script>
      </polymer-element>
  </body>
</html>
